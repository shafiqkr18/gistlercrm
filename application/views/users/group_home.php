<script>





var location_json_array = {"2":{"03531":"Abu Dhabi Gate City","09656":"AbuDhabi-Al Ain (Highway)","01457":"Airport road","01458":"Al aryam","03532":"Al Badaa","03533":"Al Bahia","03534":"Al Baraha","01459":"Al barza","03535":"Al Bateen","08489":"Al Bateen Al Ain","09760":"Al Danah","03536":"Al Dhafrah","03537":"Al Falah City","03538":"Al Ghadeer","09620":"Al Gurm West","01460":"Al hosn","03539":"Al Hudayriat Island","03540":"Al Ittihad Road","03541":"Al Karamah","03542":"Al Khaleej Al Arabi Street","03543":"Al Khalidiya","03544":"Al Maffraq","01461":"Al maha","08139":"Al Maharba","03545":"Al Manaseer","03546":"Al Manhal","03547":"Al Maqtaa","01462":"Al markaz","03548":"Al Markaziyah","01463":"Al mina","01464":"Al muneera","09286":"Al Muntazah","03549":"Al Mushrif","03550":"Al Nahda Abu Dhabi","01465":"Al nahyan","03551":"Al Nahyan Camp","03552":"Al Najda Street","05992":"Al Nasr Street","03553":"Al Qurm","01466":"Al raha","03554":"Al Raha Beach","03555":"Al Raha Gardens","03556":"Al Raha Golf Gardens","03557":"Al Rahba","03558":"Al Rawdah","03559":"Al Reef","01467":"Al reef villas","01468":"Al Reem","03560":"Al Reem Island","01469":"Al rehhan","03561":"Al Ruwais","06675":"Al Safarat District","03562":"Al Samha","03563":"Al Shahama","03564":"Al Shamkha","03565":"Al Sowwah","03567":"Al Wathba","03568":"Al Zaab","025378":"Al Zahraa","01470":"Arabian village","08585":"Bain al Jessrain","03569":"Baniyas","03570":"Between Two Bridges","03571":"Building Materials City","08342":"Capital Centre","01471":"Capital plaza","03572":"City Downtown","01472":"Corniche","03573":"Corniche Area","03574":"Corniche Road","03575":"Danet Abu Dhabi","03576":"Defence Street","01473":"Delma street","03577":"Desert Village","03578":"Eastern Road","03579":"Electra Street","08945":"Firdous Street","03580":"Ghantoot","03581":"Grand Mosque District","01474":"Hamdan street","03582":"Hydra Village","03583":"Jawazat Street","01475":"Khalidia","01476":"Khalifa city (all)","01477":"Khalifa city a","01478":"Khalifa city b","01479":"Khalifa city c","03584":"Khalifa Street","08301":"Liwa Street","03585":"Lulu Island","03586":"Madinat Zayed","03587":"Marina Village","03588":"Masdar City","01480":"Mbz","03589":"Mohamed Bin Zayed City","03590":"Muroor Area","01481":"Musaffah industrial area","03591":"Mussafah","01483":"New khalifa city","03592":"Nurai Island","01484":"Officers city","05678":"Officers Club Area","03593":"Saadiyat Island","03594":"Salam Street","03595":"Sas Al Nakhl","03596":"Tourist Club Area","08110":"World Trade Center","03597":"Yas Island","03598":"Zayed Military City","07501":"Zayed Sports City"},"3":{"01773":"Abu shagara","06750":"Al Azra","09497":"Al Badie","03626":"Al Barashi","08107":"Al Blaida Area","03627":"Al Butina","01776":"Al Ettihad Street","06771":"Al Faisht","06768":"Al Falaj","01777":"Al Ghafeyah area","06543":"Al Gharayen","09614":"Al Gharb","06783":"Al Goaz","025671":"AL Hazannah","09787":"Al Heerah","03628":"Al Jubail","01779":"Al Khaldeia Area","03629":"Al Khan","01781":"Al Khezamia","03630":"Al Majaz","01783":"Al Mamzar - Sharjah","01784":"Al Mareija","08071":"AL Mujarrah","01785":"Al Nahda Sharjah","01786":"Al Naimiya Area","01787":"Al Nekhailat","03631":"Al Nouf","01789":"Al Nujoom Islands","01790":"Al Qasbaa","01791":"Al Qasemiya","025633":"Al Rahmaniya","03633":"Al Ramla","01793":"Al Riffa Area","03634":"Al Shahba","06774":"Al Sharq","01795":"Al Taawon","01796":"Al Wahda","01797":"Cornich Al Buhaira","03637":"Halwan","01799":"Hamriyah Free Zone","03638":"Maysaloon","03639":"Muelih","09572":"Mughaider","01802":"Rolla Area","01803":"Sharjah Airport freezone (SAIF)","01804":"Sharjah Industrial Area","08274":"Tilal City","01805":"Umm Khanoor","03640":"Wasit"},"1":{"08845":"Acacia Avenues","08238":"Academic City","06032":"Akoya","07420":"Akoya Oxygen","025312":"Al Awir","08327":"Al Bada'a","05981":"Al Barari","017":"Al Barsha","082":"Al Furjan","04924":"Al Garhoud","07480":"Al Hamriya","09483":"Al Jaddaf","05790":"Al Jafiliya","07297":"Al Karama","06119":"Al Khail Heights","05780":"Al Khawaneej","05684":"Al Mamzar","06573":"Al Mizhar","075":"Al Nahda","09298":"Al Nahda 2","076":"Al Quoz","06297":"Al Qusais","06067":"Al Rashidiya","072":"Al Rigga","07147":"Al Safa","05773":"Al Sufouh","06000":"Al Twar","05715":"Al Warqaa","05695":"Al Warsan","05709":"Al Wasl","012":"Arabian Ranches","08851":"Arjan","018":"Bur Dubai","013":"Business Bay","04940":"Culture Village","044":"Deira","036":"DIFC","014":"Discovery Gardens","024":"Downtown Dubai","06378":"Downtown Jebel Ali","09406":"Dubai Creek Club Residences","074":"Dubai Healthcare City","08779":"Dubai Hills Estate","05814":"Dubai Industrial City","079":"Dubai Internet City","070":"Dubai Investment Park","015":"Dubai Marina","05911":"Dubai Maritime City","09469":"Dubai Pearl","06006":"Dubai Studio City","05745":"Dubai Waterfront","05889":"Dubai World Central","033":"Dubailand","06008":"DuBiotech","05795":"Emirates Golf Course","026":"Emirates Hills","05680":"Festival City","031":"Green Community","020":"Greens","054":"IMPZ","027":"International City","019":"JBR","073":"Jebel Ali","030":"Jumeirah","042":"Jumeirah Golf Estates","04916":"Jumeirah Heights","039":"Jumeirah Islands","022":"Jumeirah Lake Towers","040":"Jumeirah Park","053":"Jumeirah Village Circle","05712":"Jumeirah Village Triangle","034":"Lakes","06342":"Majan","025":"Meadows","05904":"Meydan City","037":"Mirdiff","06132":"Mohammad Bin Rashid City","047":"Motor City","05777":"Muhaisnah","05979":"Nad Al Hamar","05986":"Nad Al Sheba","023":"Old Town","035":"Other","07980":"Oud Al Muteena","09554":"Oud Metha","05758":"Palm Jebel Ali","016":"Palm Jumeirah","05809":"Pearl Jumeirah Island","05951":"Ras Al Khor","06004":"Reem","038":"Satwa","028":"Sheikh Zayed Road","055":"Silicon Oasis","043":"Sports City","021":"Springs","06384":"Technology Park","08131":"TechnoPark","048":"TECOM","041":"The Gardens","06036":"The Hills","08065":"The Lagoons","07570":"The Views","08689":"The Villa","04934":"The World Islands","09205":"Town Square","06064":"Umm Ramool","029":"Umm Suqueim","032":"Victory Heights","068":"World Trade Centre","06753":"Zabeel Road"},"4":{"01816":"ain ajman","01343":"Ajman boulevard","01817":"ajman corniche road","01818":"ajman downtown","01819":"ajman industrial area","01820":"ajman marina","01821":"ajman meadows","01822":"ajman uptown","01823":"al ameera village","07246":"Al Bustan","01824":"al humaid city","01825":"al ittihad village","01826":"al naemiyah","01827":"al rashidiya","01828":"al rumaila","03611":"Al Zahraa","08232":"Al Zorah","01830":"awali city","01831":"corniche ajman","01832":"emirates city","06264":"Garden city","01833":"green city","03612":"Manama","01835":"marmooka city","03613":"Muehat","03614":"Musheiref","01838":"new industrial area","01839":"park view city","06495":"Sheikh Khalifa Bin Zayed"},"8":{"03599":"Al Ain Industrial Area","03600":"Al Buraymi","03601":"Al Faqa","03602":"Al Hili","09047":"Al Jahili","03603":"Al Jimi","03604":"Al Khabisi","03605":"Al Maqam","03606":"Al Markhaniya","09050":"Al Mutarad","09053":"Al Oyoun Village","03607":"Al Sinaiya","03608":"Al Tawiya","025233":"Falaj Hazza","03609":"Tawam","03610":"Zakher"},"6":{"09082":"Al Dhaith","01442":"Al hamra (all)","03615":"Al Hamra Village","01443":"Al marjan island","08507":"Al Nakheel","06047":"Al Qusaidat","05994":"Al Seer","01444":"Bab al bahr","03616":"Cornich Ras Al Khaima","01445":"Cove","08716":"Cove Rotana","03617":"Dana Island","01446":"Golf apartments","01447":"Granada","01448":"Julfar","01449":"Julfar office","01450":"Julfar residential","09653":"Khuzam","01451":"Luxury b villa","01452":"Luxury c villa","01453":"Malibu","01454":"Marina apartments","03618":"Mina Al Arab","01455":"Oceana apartments","03619":"RAK Financial City","03620":"RAK Industrial and Technology Park","03621":"Ras Al Khaimah Creek","03622":"Ras al Khaimah Gateway","03623":"Ras Al Khaimah Waterfront","01456":"Royal breeze villas","03624":"Saraya Islands","08184":"Sheikh Mohammed Bin Zayed Road","03625":"Yasmin Village"},"5":{"01812":"al salam city","06333":"Amwaj Resort","01813":"emirates modern industrial","01810":"khor al beidah","01811":"umm al quwain marina","03641":"White Bay"},"7":{"01809":"corniche al fujairah","01807":"downtown fujairah","01808":"sheikh hamad bin abdullah st"}};

$(document.body).on('change','#emirates_list input[type="checkbox"]:checked',function (event){

	var locations_list = '';

		var id = this.id;

		var name = this.value;

		

		

		

		locations_list +='<div id="emirate_'+id+'" class="checkbox"><div style="font-weight:bold; margin:8px 0 2px 0; font-size:14px;">'+name+'</div>';

		$.each(location_json_array[id], function(key, val) {

				locations_list += '<li><label class="checkbox-inline">';

				locations_list += '<input name="input" id="'+key+'" emirate_id="'+id+'" type="checkbox" value="'+val+'"> <span class="lbl padding">'+val+'';

				locations_list += '</span></label></li></div>';

		});

		locations_list += '</div>';

	$('#locations_list').append(locations_list);

	//alert(locations_list);

});

</script>



<script type="text/javascript">

var screenname='groups';

/* Check for value change in form */

var formDataChange = false;

	$(document.body).on('change', "#myForm",function (event)

	{

	   formDataChange = true;

	});

window.onbeforeunload = function() { 

  if (formDataChange) {

    return 'Data not saved!';

  }

}

$(document).ready(function () {

	$('#sms_table').click(function() {

		if($('#listings_row input:checked').length == 0){

			$('#checkbox_error').show(400);	

			return false;

		}else{

			$("#smsLink").trigger('click');

		}

	});

});

//datatable initilization

$(document).ready(function() {

	$("#notes").keypress(function (evt) {

  var keycode = evt.charCode || evt.keyCode;

  //alert(keycode);

  if (keycode  == 34 || keycode  == 39 || keycode  == 47 || keycode  == 92 || keycode  == 13) { //Enter key's keycode

    return false;

  }

});

	$("#notesx").keypress(function (evt) {

  var keycode = evt.charCode || evt.keyCode;

  //alert(keycode);

     return false;

});

	var oTable = $('#listings_row').dataTable( {

					"bProcessing": true,

					"bServerSide": true,

					"sDom": 'R<>rt<ilp><"clear">',

					   "aoColumnDefs": [ 

                {

                       'render': function (data, type, full, meta){

                        //check the main check box

                        $('#check_all_checkboxes').attr('checked', false);

                        return '<div style="text-align:center;"><input style="align:center;" type="checkbox" value="' + data + '">  <span class="lbl"></span></div>';

                    },

                    "aTargets": [ 0 ]

                },

			

                //{ "bVisible": false, "aTargets": [ 44 ] },

                { "bSortable": false, "aTargets": [ 0 ] }

			   

                

           

            ],

					 "aoColumns": [

			{ "mDataProp": "id" },

            { "mDataProp": "name" },

			{ "mDataProp": "description" },{ "mDataProp": "created_date" }

			],

			 "columns": [

			{ "data": "id" },

            { "data": "name" },

			{ "data": "description" },{ "data": "created_date" }

			],

					"bRegex": true,

					"iDisplayLength": 25,

					"sAjaxSource": "<?php echo base_url();?>users/datatable_groups",

					"iDisplayStart": 0,

					"sPaginationType": "full_numbers",

					'fnServerData': function (url, data, callback){ 

								/* Add some extra data to the sender */

							 $.ajax

              ({

                           "dataType": 'json', 

                           "type": "POST", 

                           "url": url, 

                           "data": data, 

                           "success": function(json) {

                               callback(json);

                             



                       }

                       });

					},

					"rowCallback": function( row, data ) {

						 $(row).attr("id",data.id);

						 return row;

					}

				} );

	$("#searchbox1 input").keyup( function () {

		/* Filter on the column (the index) of this element */

		oTable.fnFilter( this.value, $(this).attr('id') );

		$('#reset_filter').css('display', '');

	} );

	$("#searchbox1 select").change( function () {

		/* Filter on the column (the index) of this element */

		oTable.fnFilter( this.value, $(this).attr('id') );

		$('#reset_filter').css('display', '');

	} );

	//reset filter and drawtable

	$("#reset_filter").click(function () {

			$("#myForm2")[ 0 ].reset();

			oTable.fnDraw(false);

    		oTable.fnFilterClear(true);

			$('#reset_filter').css('display', 'none');

	});

//change css of selected row	

	$(document.body).on("click", "#listings_row tbody tr, .overflow", function(event){

		//alert($(this).attr('id'));

		if(formDataChange==false){

		  $("td.yellowCSS", oTable.fnGetNodes()).removeClass("yellowCSS");

		  $('#listings_row tbody #'+$(this).attr('rel')).find("td").addClass("yellowCSS");

		  $(event.target).parent().find("td").addClass("yellowCSS");

		}

	});

// check box delete

	$(document.body).on("click", '.dbstatus', function() {   

	if($('#listings_row input').is(':checked')){

		if(confirm("Are you sure you want to delete!")){

			 var allVals = [];

			 type = $(this).attr('id');

			 $('#listings_row input[type="checkbox"]:checked').each(function() {

			   allVals.push($(this).val());

			   name=$(this).attr('id');

			 });

						$.post( '<?php echo base_url();?>users/status_groups/', { ids: allVals, type:$(this).attr('id') },

						  function( data ) {

							 $("#myForm")[ 0 ].reset();

							 $('#edit').css('display', 'none'); /* This shows the update button when a filed is selected */ 

						     $('#new').css('display', 'inline'); /* This shows the update button when a filed is selected */ 

							  oTable.fnDeleteRow( 47 );

							  $('#showdata').html(data);

							  $('#showdata').animate({ 'color': 'red'}, "slow");

						  }

					);

		}

	 }

	 else {

	 	//alert('Please select at least one entry!');

		$('#checkbox_error').show(400);

	 }

     });

	

} );

/* Insert / Update function */

		 $(document).ready(function() {

			$('#myForm').ajaxForm({

			  async: false,

			  beforeSubmit : function() { 

			  var lookup	 = false;

			  var validate 	 = false;

			  var fields_set = false;

			  

			 validate =  $("#myForm").validate({rules: { price: { number: true, }, size: { number: true, }} , errorClass: 'form_fields_error',  errorPlacement: function(error, element) {

						//$(element).attr({"title": error.text('asdasd')});

							$('#showdata').animate({ 'color': 'red'}, "slow");

							$('#showdata').fadeIn("slow");

							$('#showdata').html('Please complete all required fields');

							setTimeout(function() {  

								$('#showdata').fadeOut("slow");

								$('#showdata').animate({ 'color': 'red'}, "slow");

						    }, 5000);

						//alert('Please fill the required fields')

					}}).form() ;

				if(validate){

					return true;

				}

				else{

					return false;

				}

			  },

			  target: '#showdata',

			  success: function() {

				//  fnClickAddRow();

				  formDataChange=false;

				  if($("#ref").val()==''){ 

					 // $.ajax({

//						  async: false,

//						  url: mainurl+'landlord/getlastid/',

//						  success: function(data) {

//							last_id=data;

//						  }

//						})

				  }

				  $("#cancel").click(),

				  $('#showdata').animate({ 'color': '#49AC44'}, "slow"),

				  $('#showdata').fadeIn("slow"),

				   setTimeout(function() {  

					   $('#showdata').fadeOut("slow")

				   }, 5000);

			  }

			});

		  });

	function fnClickAddRow() {

	$('#listings_row').dataTable().fnAddData( [

							'',

							'',

							'',

							'',

							'',

							'',

							'',

							'',

							'',

							'',

							'',

	] );

}

//end update

/* Fetch single item details */	

var last_id = '';

function getSingleRow(id){

							$('#update, #Save').css('display', 'none');

							$('#edit').css('display', 'inline');

							$('#myForm input, #myForm select, #myForm textarea').attr('disabled', 'disabled');

							animate_the_form_table_on_click();

							$.getJSON("<?php echo base_url();?>/users/single_group/"+id, function(json){ 

							 $.each(json, function(key, val) {

								$("#"+key).val(val);

							 });

							 

							//getGroupUsers(id)

							

							/* generate the boxes */

							/*******************************************/

							$('#emirates_list input, #listings_list input, #users_list input').attr('checked', false);

							$('#locations_list').html('');



							if(json.emirates_allowed){

								var emirates = json.emirates_allowed.split(',');

								for (var i=0;i<emirates.length;i++)

								{ 

									$('#emirates_list .emirates_allowed_'+emirates[i]).attr('checked','checked');

								}

								

								var locations_list = '';

								$('#emirates_list input[type="checkbox"]:checked').each(function() {

									var id = this.id;

									var name = this.value;

									locations_list +='<div id="emirate_'+id+'"><div style="font-weight:bold; margin:8px 0 2px 0; font-size:14px;">'+name+'</div>';

									$.each(location_json_array[this.id], function(key, val) {

											locations_list += '<li><label class="checkbox-inline">';

											locations_list += '<input name="input" id="'+key+'" emirate_id="'+id+'" class="locations_allowed_'+key+'" disabled="disabled" type="checkbox" value="'+val+'">'+val+'';

											locations_list += '<label></li>';

									});

									locations_list += '</div>';

								}); 

								$('#locations_list').html(locations_list);

								//alert(locations_list);

							}

							

							//locations

							

							if(json.locations_allowed){

								var locations = json.locations_allowed.split(',');

								for (var i=0;i<locations.length;i++)

								{ 

									$('#locations_list .locations_allowed_'+locations[i]).attr('checked','checked');

								}

							}

							

							//users

							if(json.user_ids){

								var user_ids = json.user_ids.split(',');

								for (var i=0;i<user_ids.length;i++)

								{ 

									$('#users_list .user_ids_'+user_ids[i]).attr('checked','checked');

								}

							}

							

							//listings

							if(json.listings_allowed){

								var listings = json.listings_allowed.split(',');

								for (var i=0;i<listings.length;i++)

								{ 

									$('#listings_list .listings_allowed_'+listings[i]).attr('checked','checked');

								}

							}

							

							

							/* generate the boxes */

							/*******************************************/

							

							

							last_id = json.id;

							/* get notes */	

							$('#showdata').css('color','#49AC44');

							$('#showdata').html('Record selected')

							$('#showdata').fadeIn("slow");

							   setTimeout(function() {  

								   $('#showdata').fadeOut("slow");

							   }, 5000);

						}); //End json 

						formDataChange = false;

												disable_popup();

						}

//fetch single listing			

$(document.body).on("click", '#listings_row tbody tr', function() {  

				if($(this).attr('id')!=''){

					if(formDataChange==true){

						var result=confirm("You have not saved the data, all changes will be lost!")

					}

					if(result==true || formDataChange==false){

						var id=$(this).attr('id');

						getSingleRow(id);

						}

					}

}); //End click

//extra				

$(document).ready(function(){

			$("input").tooltip();

			$('#myForm input, #myForm select, #myForm textarea').attr('disabled', 'disabled');

			formDataChange=false;

			disable_popup();

			$("#mobile, #phone, #phone_2, #fax, #fax_2").numeric();

			$("#company").keyup( function () {

			} );

			

			

});

$(document).ready(function(){

	var this_screen_listing_id='';

	if(this_screen_listing_id){

     $.getJSON("<?php echo base_url();?>landlord/single/"+this_screen_listing_id, function(json){ 

					 $.each(json, function(key, val) {

						$("#"+key).val(val);

					 });

				get_notes('landlord', this_screen_listing_id);

		});

	$('#edit').css('display', 'inline');

	}

});







$(document).ready(function(){

	$(document.body).on('change', "#emirates_list",function (event){

		var vals = [];

		

		$('#emirates_list input[type="checkbox"]:checked').each(function() {

			vals.push($(this).attr('id'));

		});

		$('#emirates_list input[type="checkbox"]:unchecked').each(function() {

			$('#emirate_'+this.id).remove();

		});

		$('#emirates_allowed').val(vals);

	});

	

	$(document.body).on('change', "#locations_list",function (event){

		var vals = [];

		var vals_e = [];

		$('#locations_list input[type="checkbox"]:checked').each(function() {

			vals.push($(this).attr('id'));

			vals_e.push($(this).attr('emirate_id'));

		});

		//alert(vals);

		$('#locations_allowed').val(vals);

		$('#emirates_selected').val(vals_e);

	});

	

	$(document.body).on('change', "#users_list",function (event){

		var vals = [];

		$('#users_list input[type="checkbox"]:checked').each(function() {

			vals.push($(this).attr('id'));

		});

		//alert(vals);

		$('#user_ids').val(vals);

	});

	

	$(document.body).on('change', "#listings_list",function (event){

		var vals = [];

		$('#listings_list input[type="checkbox"]:checked').each(function() {

			vals.push($(this).attr('id'));

		});

		//alert(vals);

		$('#listings_allowed').val(vals);

	});

	

	$(document.body).on("click", '#new', function() {  

		getGroupUsers(0);

		$('#users_list input').attr('disabled', false);		

	}); 

	

	getGroupUsers(0)

});



	function getGroupUsers(group_id){

		$.ajax({

			async: false,

			url: mainurl+'users/getGroupUsers/'+group_id+'/?'+Math.round((new Date()).getTime() / 1000),

			success: function(data) {

				$('#users_list').html(data);

			}

		});

	}

	

	

	

</script>

<div id="wrapper">

            <div class="container">

            

            

            <!-- Page Heading -->

            <div class="row">

                <div class="col-lg-12">

                	<div class="page_head_area"><h1><i class="fa fa-group"></i> Groups</h1></div>

                    <p>Create groups within the company in which users can be allowed or disallowed access based on the criteria selected. Agents would only see listings within their groups. If the listing sharing option is disabled, admin users will only have access to listings, leads and deals for their groups.</p>

                </div>

            </div>

            



         

             <!-- Error Message Alert -->

             <div role="alert" class="alert alert-danger alert-dismissible fade in" id="errorMsg" style="display:none;">

              <button aria-label="Close" data-dismiss="alert" class="close" type="button">

              <span aria-hidden="true">×</span></button>

              <strong>Error!</strong> <span id="errortxt">here is error text</span> 

            </div> 

            

            <!-- Success Message Alert -->

             <div role="alert" class="alert alert-success alert-dismissible fade in" id="successMsg" style="display:none;">

              <button aria-label="Close" data-dismiss="alert" class="close" type="button">

              <span aria-hidden="true">×</span></button>

              <strong>Success!</strong> <span id="successtxt">here is success text</span>  

            </div> 

            

            <!-- Info Message Alert -->

             <div role="alert" class="alert alert-info alert-dismissible fade in" id="infoMsg" style="display:none;">

              <button aria-label="Close" data-dismiss="alert" class="close" type="button">

              <span aria-hidden="true">×</span></button>

              <strong>Info!</strong> <span id="infotxt">here is error text</span>  

            </div> 

            

            

            

            <div id="inner_tab">

            

            <div class="row fadeInUp">

            <div class="col-lg-12">

            

            <!-- Nav tabs -->

            <div class="inner_tab_nav">

                <ul class="nav nav-tabs">

                      <li ><a href="<?php echo site_url('users');?>">Manage Users</a></li>

                    <li  class="active"><a href="<?php echo site_url('users/groups');?>">Manage Groups</a></li>

                    <li><a href="<?php echo site_url('users/questions');?>">Manage Security Questions</a></li>

                </ul>

            </div>

                    

            <!-- Tab content -->

            <div class="tab-content">

            

            <?php

		 $attributes = array('data-toggle' => 'validator', 'id' => 'myForm', 'role' => 'form');

	    echo form_open_multipart('users/submit_groups', $attributes);

        ?>

            

            <div class="row">

            <div class="col-lg-12">

           <button type="button" id="new" class="btn btn-lg btn-primary"><i class="fa fa-plus-circle"></i>New Group</button>



            <button  style="display:none;" type="submit" id="update"  class="btn btn-lg btn-success" name="Update" value="Update Group">

            <i class="fa fa-plus-circle"></i> Save Group</button>

             <button  style="display:none;" type="submit" id="Save"  class="btn btn-lg btn-success" name="Save" value="Save Group">

            <i class="fa fa-plus-circle"></i> Save Group</button>

       

                <button  style="display:none;" type="button" id="edit" class="btn btn-lg btn-warning"><i class="fa fa-plus-circle"></i>Edit Group</button>

            <a href="javascript:void(0)" id="cancel" class="btn btn-lg btn-default"  style="display:none;"><i class="fa fa-times"></i> Cancel</a>

            <div class="showdata" id="showdata">

					</div>

       </div>

            </div>            

            <h4 class="add_new_rental" id="title">Add New Record</h4>

            <div class="row fadeInUp">

            

            

            <div class="col-md-2">

              <div class="form-group">

                <label>Group Name </label>

                <input name="id" class="form_fields" id="id" type="hidden" value="0" style="display:none;">

				<input name="name" type="text" class="form-control input-sm required" id="name" value="" tabindex=5>

                <input type="hidden" id="client_id" name="client_id" value="<?php echo $client_id;?>" />

              </div>

              <div class="form-group">

                <label>Description</label>

               

                <textarea name="description" class="form-control" id="description" ></textarea>

              </div>

            </div>

            

            <div class="col-md-2">

            <h5 class="text-primary">Emirates </h5>

            

                <div class="well" id="emirates_list">

            	<div class="checkbox">

             	<label class="">

                  <input name="input" id="2" type="checkbox" class="emirates_allowed_2" value="Abu Dhabi">

                    <span class="lbl padding">Abu Dhabi </span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                    <input name="input" id="4" type="checkbox" class="emirates_allowed_4" value="Ajman">

                    <span class="lbl padding">Ajman </span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                  <input name="input" id="8" type="checkbox" class="emirates_allowed_8" value="Al Ain">

                    <span class="lbl padding">Al Ain </span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                 <input name="input" id="1" type="checkbox" class="emirates_allowed_1" value="Dubai">

                    <span class="lbl padding">Dubai </span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                   <input name="input" id="7" type="checkbox" class="emirates_allowed_7" value="Fujairah">

                    <span class="lbl padding">Fujairah</span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                   <input name="input" id="6" type="checkbox" class="emirates_allowed_6" value="Ras Al Khaimah">

                    <span class="lbl padding">Ras Al Khaimah</span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                  <input name="input" id="3" type="checkbox" class="emirates_allowed_3" value="Sharjah">

                    <span class="lbl padding">Sharjah </span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                   <input name="input" id="5" type="checkbox" class="emirates_allowed_5" value="Umm Al Quwain">

                    <span class="lbl padding">Umm Al Quwain </span>

                </label>

                </div>

                </div>

                 <input name="emirates_allowed" type="text" class="form_fields" id="emirates_allowed" value="" style="display: none;">

	                        <input name="emirates_full" type="text" class="form_fields" id="emirates_full" value="" style="display: none;">

	                        <input name="emirates_selected" type="text" class="form_fields" id="emirates_selected" value="" style="display: none;">

            </div>

            

            

            <div class="col-md-3">

            <h5 class="text-primary">Locations  </h5>

          <!--  <p>Please select an emirate first.</p>

            <h4>Dubai</h4>-->

            

                <div class="well group_location_area" id="locations_list">

            	<p>Please select an emirate first.</p>

                </div>

            <input name="locations_allowed" type="text" class="form_fields" id="locations_allowed" value="" style="display: none;">

            </div>

            

            <div class="col-md-3">

            <h5 class="text-primary">Users</h5>

                <div class="well" id="users_list">

            	

                </div>

                <input name="user_ids" type="text" class="form_fields" id="user_ids" value="" style="display: none;">

            </div>

            <div class="col-md-2">

            <h5 class="text-primary">Listings</h5>

            

                <div class="well" id="listings_list">

            	<div class="checkbox">

             	<label class="">

                   <input name="input" id="1" class="listings_allowed_1" type="checkbox" value="Rentals Listings">

                    <span class="lbl padding">Rentals Listings</span>

                </label>

                </div>

                <div class="checkbox">

             	<label class="">

                   <input name="input" id="2" class="listings_allowed_2" type="checkbox" value="Sales Listings">

                    <span class="lbl padding">Sales Listings </span>

                </label>

                </div>

                </div> 

                <input type="hidden" id="listings_allowed" name="listings_allowed" value="" />

                <div class="form-group">

                <label>Listing Sharing: </label>

             

                 <select name="listings_sharing" class=" form-control input-sm" id="listings_sharing">

	                            <option value="0">Disabled</option>

	                            <option value="1" selected>Enabled</option>

                          	</select>

                </div>

               

                

            </div>

            </div>

            </form>



            </div>

            </div>

            </div>

            

            

            

            <div class="tab-content fadeInUp">

            <a href="" class="btn btn-danger margin-bottom-15" id="delete" class="dbstatus" href="# delete"><i class="fa fa-trash"></i> Delete</a>

                <table class="table table-striped table-bordered table-hover datatables" id="listings_row">

                  <thead>

                  <tr>

                    <th></th>

                    <th>Name </th>

                    <th>Description </th>

                    <th>Listed</th>

                    </tr>  </thead>

                    	<thead id="searchbox1" class="search_box">

                    <tr class="highlighted">

                    <td><a style="display:none;" id="reset_filter" href="# Reset"><img src="<?php echo base_url();?>mydata/images/swap.png" title="Reset filter"></a></td>

                    <td><input type="text" class="form-control input-sm" id="1"></td>

                    <td><input type="text" class="form-control input-sm" id="2"></td>

                    <td><input type="text" class="form-control input-sm" id="10"></td>

                    </tr>

                    </thead>

                    

                    <tbody>                  

                    </tbody>

                </table>

            </div>

            

            



 			</div>

            </div>

            <!-- container end -->

            

            

            </div>

                <script type="text/javascript" src="<?php echo site_url();?>js_module/common.js?ts=123456789"></script> 

 <script>

 $(document).ready(function() {

            		$("#new").click(function () {	

					$("#locations_list").html('');

					    $("#myForm")[ 0 ].reset();

	  				 if(screenname=='users'){

		

							$('#rand_key').val(genRandKey());

							var value='';

							var portalValue = [];

							var count=0;

						

						}

					$("#title").text('Add New record');

					$('#update, #edit, #new, #placeholder').css('display', 'none'); /* This shows the update button when a filed is selected */ 

					$('#Save, #cancel').css('display', 'inline'); /* This shows the update button when a filed is selected */   

					$('#myForm input, #myForm select, #myForm textarea').prop('disabled', false);;

	       

				});

				$("#cancel").click(function () {

							

					   // $("#myForm")[ 0 ].reset();

						$("#title").text('Add New record');

						$('#update, #Save, #edit, #cancel').css('display', 'none'); /* This shows the update button when a filed is selected */

						$('#new').css('display', 'inline');    

						$('#myForm input, #myForm select, #myForm textarea').prop('disabled', true);

						$('#id').val(0);

							   

						//for now keep last_id=0

						last_id=0;

						if(screenname=="users"){

						if(last_id=='' || active_tab=='tab2'){

							$("#myForm")[ 0 ].reset();

						}

						}

						if (last_id>0){

							getSingleRow(last_id);

						}

						

						arr_images.length = 0; //reset the array of images

						formEnabled=false;

						formDataChange = false;

						disable_popup();

						

					});

            });

 </script>           